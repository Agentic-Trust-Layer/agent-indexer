specVersion: 1.3.0
features:
  - ipfsOnEthereumContracts
indexerHints:
  prune: auto
schema:
  file: ./schemaEas.graphql
dataSources:
  - kind: ethereum
    name: SchemaRegistry
    network: sepolia
    source:
      address: "0x0a7E2Ff54e76B8E6659aedc9103FB21c038050D0" 
      abi: SchemaRegistry
      startBlock: 7516959
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - Schema
      abis:
        - name: SchemaRegistry
          file: ./abis/SchemaRegistry.json
      eventHandlers:
        # Matches SchemaRegistry ABI
        - event: Registered(indexed bytes32,address)
          handler: handleSchemaRegistered
      file: ./src/eas-schema.ts
  - kind: ethereum
    name: EAS
    network: sepolia
    source:
      address: "0xC2679fBD37d54388Ce493F1DB75320D236e1815e" 
      abi: EAS
      startBlock: 7516959
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.9
      language: wasm/assemblyscript
      entities:
        - Attestation
      abis:
        - name: EAS
          file: ./abis/EAS.json
      eventHandlers:
        # Matches EAS ABI
        - event: Attested(indexed address,indexed address,bytes32,indexed bytes32)
          handler: handleAttested
        - event: Revoked(indexed address,indexed address,bytes32,indexed bytes32)
          handler: handleRevoked
      file: ./src/eas-attestation.ts
